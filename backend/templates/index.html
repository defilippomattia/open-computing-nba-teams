<!-- This is a comment. Comments are not displayed in the browser
<head>
    <title>First Title</title>
</head>

<body>
    <textarea id="firstbox">Edit Me</textarea>
    <button onclick="performPost()">Perform POST!</button>

    <form method="POST" enctype="multipart/form-data" id="my-form">
        <input type="text" name="title"/><br/><br/>
        <input type="submit" value="Submit" id="btnSubmit"/>
    </form>
</body>
<script src="https://code.jquery.com/jquery-3.6.0.js"></script>

<script>
    function performPost() {
        var form = $('#my-form')[0];
        var data = new FormData(form);
        $.ajax({
            type: "POST",
            url: "{{ url_for('create_file') }}",
            data: data,
        })
    }
</script> -->


<!DOCTYPE html>
<html>
    <title>jQuery Ajax Form Submit with FormData Example - NiceSnippets.com</title>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script> 
<body>
    <h1>jQuery Ajax Form Submit with FormData Example - NiceSnippets.com</h1>

    <form method="POST" enctype="multipart/form-data" id="my-form">
        <label for="cars">Choose search field:</label>
        <select name="cars" id="cars">
          <option value="all">All</option>
          <option value="team_name">Team Name</option>
          <option value="year_founded">Year Founded</option>
          <option value="player">Player</option>
        </select>
        <br><br>
        <input type="text" name="title"/><br/><br/>
        <input type="file" name="files"/><br/><br/>
        <input type="submit" value="Submit" id="btnSubmit"/>
    </form>
    <span id="output"></span>
    <script type="text/javascript">
    	$(document).ready(function () {
            $("#btnSubmit").click(function (event) {
                //stop submit the form, we will post it manually.
                event.preventDefault();
         
                // Get form
                var form = $('#my-form')[0];
         
                // FormData object 
                var data = new FormData(form);
                console.log("alo bre")
                console.log(data)
         
                // If you want to add an extra field for the FormData
                data.append("CustomField", "This is some extra data, testing");
         
                // disabled the submit button
                $("#btnSubmit").prop("disabled", true);
         
                $.ajax({
                    type: "POST",
                    enctype: 'multipart/form-data',
                    url: "{{ url_for('create_file') }}",
                    data: data,
                    processData: false,
                    contentType: false,
                    cache: false,
                    timeout: 800000,
                    success: function (data) {
                        $("#output").text(data);
                        console.log("SUCCESS : ", data);
                        $("#btnSubmit").prop("disabled", false);
                    },
                    error: function (e) {
                        $("#output").text(e.responseText);
                        console.log("ERROR : ", e);
                        $("#btnSubmit").prop("disabled", false);
                    }
                });
            });
        });
    </script>
</body>
</html>